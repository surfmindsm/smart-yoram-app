# 교회 통합 관리 시스템 (Church Admin Dashboard)
## Product Requirements Document (PRD)

**버전**: 1.0.0
**작성일**: 2025-09-30
**프로덕트 오너**: Smart Yoram Team
**타겟 플랫폼**: 웹 애플리케이션 (React SPA)

---

## 1. 제품 개요 (Product Overview)

### 1.1 제품 설명
교회 통합 관리 시스템(Church Admin Dashboard)은 교회 운영을 디지털화하고 효율화하기 위한 종합 관리 플랫폼입니다. 교인 관리부터 헌금 관리, 커뮤니티 활동, 행사 운영까지 교회 운영의 모든 측면을 하나의 통합된 시스템에서 관리할 수 있습니다.

### 1.2 핵심 가치 제안 (Value Proposition)
- **통합 관리**: 분산된 교회 운영 업무를 하나의 플랫폼에서 관리
- **자동화**: 출석 체크, 헌금 영수증 발급 등 반복 업무 자동화
- **데이터 기반 의사결정**: 통계 대시보드를 통한 교회 성장 지표 실시간 모니터링
- **커뮤니티 활성화**: 교인 간 소통과 나눔을 위한 온라인 커뮤니티 제공

### 1.3 타겟 사용자
- **주 사용자**: 교회 관리자, 목회자, 행정 직원
- **부 사용자**: 일반 교인 (모바일 앱 연동 예정)
- **규모**: 소규모(50명 이하)부터 대형 교회(1,000명 이상)까지

### 1.4 비즈니스 목표
- 2025년 말까지 500개 교회 도입
- 월간 활성 사용자(MAU) 10,000명 달성
- 교회당 평균 관리 효율성 40% 향상

---

## 2. 기능 요구사항 (Functional Requirements)

### 2.1 인증 및 권한 관리

#### 2.1.1 로그인/로그아웃
- **이메일 로그인**: 이메일/비밀번호를 통한 로그인
- **세션 관리**: JWT 토큰 기반 세션 유지
- **자동 로그아웃**: 30분 비활동 시 자동 로그아웃
- **기억하기**: "로그인 상태 유지" 옵션

#### 2.1.2 사용자 권한
- **관리자 (Admin)**: 모든 기능 접근 가능
- **목회자 (Pastor)**: 교인 관리, 설교 관리 권한
- **직원 (Staff)**: 할당된 기능만 접근
- **일반 교인 (Member)**: 읽기 전용 및 개인정보 수정

### 2.2 대시보드 & 분석

#### 2.2.1 통계 대시보드
- **실시간 지표**:
  - 총 교인 수 및 증감 추이
  - 주간/월간 출석률
  - 헌금 통계 (십일조, 감사헌금, 선교헌금 등)
  - 새신자 등록 현황
- **차트 시각화**:
  - 라인 차트: 시계열 데이터 (출석률, 헌금 추이)
  - 바 차트: 범주별 비교 (연령대, 구역별)
  - 파이 차트: 구성 비율 (교인 분포)
  - 히트맵: 출석 패턴 분석

#### 2.2.2 보고서 생성
- **자동 보고서**: 주간/월간/분기별 자동 생성
- **맞춤 보고서**: 사용자 정의 기간 및 지표 선택
- **내보내기**: PDF, Excel, CSV 형식 지원

### 2.3 교인 관리

#### 2.3.1 교인 정보 관리
- **기본 정보**:
  - 이름, 생년월일, 성별
  - 연락처 (전화번호, 이메일, 주소)
  - 프로필 사진
- **교회 정보**:
  - 등록일, 세례일, 직분
  - 소속 구역/목장
  - 봉사 부서
- **가족 관계**: 가족 구성원 연결 및 가계도

#### 2.3.2 교인 초대 시스템
- **SMS 초대**: 문자 메시지로 앱 설치 링크 발송
- **이메일 초대**: 가입 링크 포함 이메일 발송
- **QR 코드**: 오프라인 등록을 위한 QR 코드 생성
- **일괄 초대**: CSV 파일로 다수 교인 일괄 초대

#### 2.3.3 교인 검색 및 필터
- **고급 검색**: 이름, 전화번호, 구역, 직분 등
- **필터링**: 연령대, 성별, 등록 기간, 활동 상태
- **정렬**: 이름, 등록일, 최근 출석일 기준

### 2.4 출석 관리

#### 2.4.1 출석 체크
- **QR 체크인**: 교인별 고유 QR 코드
- **수동 체크**: 관리자가 직접 체크
- **일괄 체크**: 구역/부서별 일괄 처리
- **온라인 예배**: 실시간 스트리밍 참여 자동 체크

#### 2.4.2 출석 통계
- **개인별**: 출석률, 연속 출석, 결석 패턴
- **전체**: 주간/월간 평균 출석률
- **예배별**: 주일예배, 수요예배, 새벽예배 구분

### 2.5 헌금 관리

#### 2.5.1 헌금 기록
- **개별 입력**: 교인별 헌금 기록
- **일괄 입력**: 엑셀 업로드 또는 다중 입력
- **헌금 종류**: 십일조, 감사, 선교, 건축 등
- **익명 헌금**: 무기명 헌금 처리

#### 2.5.2 기부금 영수증
- **자동 생성**: 연말정산용 영수증 자동 생성
- **정보 자동 입력**:
  - 교회 정보 (이름, 주소, 사업자등록번호)
  - 기부자 정보 (이름, 주민번호 앞자리)
- **발송**: 이메일/문자 발송 또는 인쇄

#### 2.5.3 헌금 통계
- **기간별 집계**: 일/주/월/년 단위
- **종류별 분석**: 헌금 유형별 추이
- **교인별 내역**: 개인 헌금 이력 조회

### 2.6 커뮤니티

#### 2.6.1 무료나눔
- **물품 등록**: 사진, 설명, 위치 정보
- **카테고리**: 의류, 가전, 가구, 도서 등
- **상태 관리**: 나눔중, 예약중, 완료
- **댓글/문의**: 실시간 소통

#### 2.6.2 물품 요청
- **필요 물품 등록**: 구체적인 요청 사항
- **긴급도**: 긴급/보통/여유 표시
- **매칭**: 나눔 물품과 자동 매칭 제안

#### 2.6.3 물품 판매
- **중고 거래**: 교인 간 안전한 중고 거래
- **가격 설정**: 판매가 및 할인 정보
- **거래 방식**: 직거래/택배 선택

### 2.7 구인구직

#### 2.7.1 구인 공고
- **일자리 등록**: 회사, 직무, 급여, 근무지
- **자격 요건**: 경력, 학력, 기술
- **지원 방법**: 직접 지원 또는 추천

#### 2.7.2 구직 등록
- **이력서 등록**: 경력, 학력, 자격증
- **희망 조건**: 직무, 급여, 지역
- **공개 설정**: 전체/교인만/비공개

#### 2.7.3 찬양팀 모집
- **팀 소개**: 활동 내용, 연습 일정
- **모집 파트**: 보컬, 악기별 모집
- **오디션**: 일정 및 장소 안내

### 2.8 교회 행사

#### 2.8.1 행사 관리
- **행사 생성**: 제목, 일시, 장소, 내용
- **참가 신청**: 온라인 사전 등록
- **정원 관리**: 최대 인원 설정 및 대기자

#### 2.8.2 알림
- **푸시 알림**: 앱 푸시 알림 (연동 시)
- **SMS 알림**: 행사 리마인더
- **이메일**: 상세 안내 및 변경 사항

### 2.9 교회 정보 관리

#### 2.9.1 기본 정보
- **교회 정보**: 이름, 주소, 연락처
- **담임목사**: 이름 및 약력
- **사업자등록번호**: 기부금 영수증용

#### 2.9.2 구독 관리
- **요금제**: Basic/Premium/Enterprise
- **결제**: 월간/연간 자동 결제
- **사용량**: 교인 수, 저장 공간 제한

---

## 3. 기술 스택 (Technology Stack)

### 3.1 프론트엔드
- **프레임워크**: React 19.0
- **언어**: TypeScript 5.x
- **상태 관리**: React Hooks (useState, useEffect)
- **스타일링**:
  - Tailwind CSS 3.x
  - shadcn/ui (Radix UI + Tailwind)
- **차트**: Recharts
- **빌드 도구**: Create React App (Webpack 5)
- **코드 스플리팅**: React.lazy() + Suspense

### 3.2 백엔드
- **Primary**: Supabase
  - PostgreSQL 데이터베이스
  - Edge Functions (Deno)
  - Row Level Security (RLS)
  - Realtime subscriptions
- **Legacy**: Python FastAPI (마이그레이션 진행 중)
  - JWT 인증
  - RESTful API

### 3.3 인프라
- **호스팅**: Vercel (프론트엔드)
- **데이터베이스**: Supabase PostgreSQL
- **파일 스토리지**: Supabase Storage
- **CDN**: Vercel Edge Network
- **모니터링**: Vercel Analytics

### 3.4 외부 서비스
- **SMS**: Twilio / AWS SNS
- **이메일**: SendGrid / AWS SES
- **결제**: 토스페이먼츠 / 아임포트

---

## 4. API 명세 (API Specification)

### 4.1 인증 API

```typescript
// 로그인
POST /api/auth/login
{
  "email": "string",
  "password": "string"
}

// 로그아웃
POST /api/auth/logout
Authorization: Bearer {token}

// 토큰 갱신
POST /api/auth/refresh
{
  "refresh_token": "string"
}
```

### 4.2 교인 관리 API

```typescript
// 교인 목록 조회
GET /api/members
Query: {
  page: number,
  per_page: number,
  search?: string,
  church_id?: number
}

// 교인 생성
POST /api/members
{
  "name": "string",
  "email": "string",
  "phone": "string",
  "church_id": number
}

// 교인 수정
PUT /api/members/{id}
{
  "name": "string",
  "email": "string",
  "phone": "string"
}

// 교인 삭제
DELETE /api/members/{id}
```

### 4.3 헌금 API

```typescript
// 헌금 기록 조회
GET /api/offerings
Query: {
  church_id: number,
  start_date?: string,
  end_date?: string,
  member_id?: number
}

// 헌금 기록 생성
POST /api/offerings
{
  "member_id": number,
  "amount": number,
  "fund_type": "string",
  "offered_on": "date",
  "is_anonymous": boolean
}

// 기부금 영수증 생성
POST /api/offerings/receipt
{
  "member_id": number,
  "year": number,
  "donation_ids": number[]
}
```

### 4.4 커뮤니티 API

```typescript
// 나눔 물품 목록
GET /api/community/sharing
Query: {
  is_free: boolean,
  category?: string,
  status?: string
}

// 물품 등록
POST /api/community/sharing
{
  "title": "string",
  "description": "string",
  "category": "string",
  "is_free": boolean,
  "price": number,
  "images": string[]
}

// 물품 요청
POST /api/community/requests
{
  "title": "string",
  "description": "string",
  "urgency": "high|medium|low"
}
```

---

## 5. 비기능 요구사항 (Non-Functional Requirements)

### 5.1 성능
- **페이지 로딩**: 3초 이내 (3G 네트워크 기준)
- **API 응답**: 평균 200ms 이내
- **동시 접속**: 1,000명 동시 접속 지원
- **데이터 처리**: 10,000개 레코드 페이징 처리

### 5.2 보안
- **HTTPS**: 모든 통신 암호화
- **인증**: JWT 토큰 기반 인증
- **권한**: Role-based Access Control (RBAC)
- **개인정보**: GDPR/개인정보보호법 준수
- **비밀번호**: bcrypt 해싱, 최소 8자

### 5.3 가용성
- **SLA**: 99.9% 가용성 보장
- **백업**: 일일 자동 백업, 30일 보관
- **재해 복구**: RTO 4시간, RPO 1시간

### 5.4 사용성
- **반응형**: 모바일, 태블릿, 데스크톱 지원
- **브라우저**: Chrome, Safari, Edge 최신 버전
- **접근성**: WCAG 2.1 Level AA 준수
- **다국어**: 한국어 (향후 영어 추가)

### 5.5 확장성
- **수평 확장**: 서버리스 아키텍처
- **데이터베이스**: 파티셔닝 지원
- **캐싱**: Redis 캐시 레이어
- **CDN**: 정적 자원 글로벌 배포

---

## 6. 제약사항 및 가정 (Constraints & Assumptions)

### 6.1 제약사항
- **예산**: 월 운영비 $500 이내
- **일정**: 2025년 12월 정식 출시
- **팀 규모**: 개발자 3명, 디자이너 1명
- **기술 제약**: React 기반 SPA 필수

### 6.2 가정
- 사용자는 기본적인 스마트폰/PC 사용 가능
- 교회는 안정적인 인터넷 환경 보유
- 교인 90% 이상 스마트폰 소유
- 주일 예배 시간대 최대 트래픽 발생

---

## 7. 마일스톤 (Milestones)

### Phase 1: MVP (2025년 Q1)
- [x] 기본 인증 시스템
- [x] 교인 관리 CRUD
- [x] 출석 체크
- [x] 헌금 기록
- [x] 통계 대시보드

### Phase 2: 커뮤니티 (2025년 Q2)
- [x] 무료나눔/물품판매
- [x] 물품요청
- [x] 구인구직
- [x] 찬양팀 모집

### Phase 3: 고도화 (2025년 Q3)
- [ ] 모바일 앱 출시
- [ ] 실시간 알림
- [ ] AI 기반 교인 분석
- [ ] 화상 회의 통합

### Phase 4: 확장 (2025년 Q4)
- [ ] 교단별 커스터마이징
- [ ] 해외 교회 지원 (다국어)
- [ ] 교회 간 네트워크
- [ ] 마켓플레이스

---

## 8. 성공 지표 (Success Metrics)

### 8.1 사용자 지표
- **MAU**: 월간 활성 사용자 10,000명
- **DAU/MAU**: 50% 이상
- **Retention**: 3개월 유지율 80%
- **NPS**: 50점 이상

### 8.2 비즈니스 지표
- **고객 획득**: 분기별 100개 교회
- **유료 전환율**: 30%
- **ARPU**: 월 50,000원
- **Churn Rate**: 월 5% 이하

### 8.3 기술 지표
- **응답 시간**: p95 < 1초
- **에러율**: < 0.1%
- **가용성**: > 99.9%
- **코드 커버리지**: > 80%

---

## 9. 리스크 관리 (Risk Management)

### 9.1 기술적 리스크
| 리스크 | 영향도 | 확률 | 대응 방안 |
|--------|--------|------|-----------|
| Supabase 서비스 중단 | 높음 | 낮음 | 백업 API 서버 구축 |
| 데이터 유실 | 높음 | 낮음 | 일일 백업, 다중 복제 |
| 보안 침해 | 높음 | 중간 | 정기 보안 감사, 펜테스팅 |
| 성능 저하 | 중간 | 중간 | 캐싱, CDN, 최적화 |

### 9.2 사업적 리스크
| 리스크 | 영향도 | 확률 | 대응 방안 |
|--------|--------|------|-----------|
| 경쟁사 출현 | 중간 | 높음 | 차별화 기능, 빠른 개발 |
| 규제 변경 | 높음 | 낮음 | 법률 자문, 컴플라이언스 |
| 사용자 이탈 | 높음 | 중간 | UX 개선, 고객 지원 강화 |
| 자금 부족 | 높음 | 중간 | 단계적 출시, 투자 유치 |

---

## 10. 부록 (Appendix)

### 10.1 용어 정의
- **교인**: 교회에 등록된 신자
- **구역**: 지역별 교인 그룹
- **목장**: 소그룹 모임 단위
- **직분**: 목사, 전도사, 장로, 권사, 집사 등
- **헌금**: 십일조, 감사헌금, 선교헌금 등

### 10.2 참고 자료
- [Supabase Documentation](https://supabase.com/docs)
- [React 19 Release Notes](https://react.dev)
- [shadcn/ui Components](https://ui.shadcn.com)
- [Tailwind CSS](https://tailwindcss.com)

### 10.3 변경 이력
| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 1.0.0 | 2025-09-30 | 초기 작성 | Smart Yoram Team |

---

**문서 승인**

| 역할 | 이름 | 서명 | 날짜 |
|------|------|------|------|
| Product Owner | | | |
| Tech Lead | | | |
| Design Lead | | | |
| QA Lead | | | |