# API ì—°ë™ ê°€ì´ë“œ

## ğŸ“š ë¬¸ì„œ ëª©ë¡

### ì‹¬ë°© & ì¤‘ë³´ê¸°ë„
1. **[ì‹¬ë°© ì‹ ì²­ API](./pastoral-care-api.md)** ğŸ 
   - ì‹¬ë°© ì‹ ì²­ ìƒì„±/ì¡°íšŒ/ìˆ˜ì •
   - ìƒì„¸ API ì‚¬ìš© ì˜ˆì œ
   - ì¸ì¦ ë°©ë²• (ë‘ ê°œ í—¤ë” í•„ìˆ˜)

2. **[ì¤‘ë³´ê¸°ë„ API](./prayer-request-api.md)** ğŸ™
   - ê¸°ë„ ìš”ì²­ ìƒì„±/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ
   - ê¸°ë„í–ˆìŠµë‹ˆë‹¤ ê¸°ëŠ¥
   - ê¸°ë„ ì‘ë‹µ ê°„ì¦ ë“±ë¡

### ëª…ì„¤êµ
1. **[Flutter ì•±ìš© ëª…ì„¤êµ API](./sermons-flutter-api.md)** ğŸ¬ **â† ê¶Œì¥**
   - Flutter/Dart ì½”ë“œ ì˜ˆì œ
   - Supabase ì§ì ‘ ì¿¼ë¦¬ ë°©ì‹
   - ìœ íŠœë¸Œ í”Œë ˆì´ì–´ ì„ë² ë”©
   - ì™„ì „í•œ SermonService í´ë˜ìŠ¤

2. **[Quick Start ê°€ì´ë“œ](./sermons-quick-start.md)** âš¡
   - 5ë¶„ ë§Œì— ì‹œì‘í•˜ê¸° (TypeScript/React Native)
   - í•„ìˆ˜ ì¿¼ë¦¬ ì˜ˆì œ

3. **[ì „ì²´ API ê°€ì´ë“œ](./sermons-api-guide.md)** ğŸ“–
   - ìƒì„¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (TypeScript/React Native)
   - ëª¨ë“  API ì‚¬ìš© ì˜ˆì œ
   - í™”ë©´ êµ¬ì„± ì œì•ˆ

## ğŸ¯ ê¸°ëŠ¥ ê°œìš”

**ëª…ì„¤êµ**ëŠ” ì‹œìŠ¤í…œ ê´€ë¦¬ìê°€ ì„ ë³„í•œ ìœ íŠœë¸Œ ì„¤êµ ì˜ìƒì„ ëª¨ë“  ì•± ì‚¬ìš©ìì—ê²Œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

### í•µì‹¬ ê¸°ëŠ¥
- âœ… ìœ íŠœë¸Œ ì˜ìƒ ì„ë² ë”©
- âœ… ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜ (ì£¼ì¼ì„¤êµ, ìˆ˜ìš”ì˜ˆë°° ë“±)
- âœ… ì¶”ì²œ ì„¤êµ í‘œì‹œ
- âœ… ì¡°íšŒìˆ˜ í†µê³„
- âœ… íƒœê·¸ ê¸°ë°˜ ê²€ìƒ‰
- âœ… ë³¸ë¬¸ ë§ì”€ ì •ë³´

## ğŸ—‚ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

```
sermon_categories (ì¹´í…Œê³ ë¦¬)
    â”œâ”€â”€ id
    â”œâ”€â”€ name (ì£¼ì¼ì„¤êµ, ìˆ˜ìš”ì˜ˆë°° ë“±)
    â””â”€â”€ display_order

sermons (ì„¤êµ ì •ë³´) â­ ë©”ì¸ í…Œì´ë¸”
    â”œâ”€â”€ id (UUID)
    â”œâ”€â”€ title (ì œëª©)
    â”œâ”€â”€ youtube_video_id (ìœ íŠœë¸Œ ID)
    â”œâ”€â”€ thumbnail_url (ì¸ë„¤ì¼)
    â”œâ”€â”€ preacher_name (ì„¤êµì)
    â”œâ”€â”€ scripture_reference (ë³¸ë¬¸ ë§ì”€)
    â”œâ”€â”€ description (ì„¤ëª…)
    â”œâ”€â”€ category_id â†’ sermon_categories
    â”œâ”€â”€ tags (íƒœê·¸ ë°°ì—´)
    â”œâ”€â”€ is_featured (ì¶”ì²œ ì—¬ë¶€)
    â”œâ”€â”€ view_count (ì¡°íšŒìˆ˜)
    â””â”€â”€ is_active (í™œì„±í™”)

sermon_views (ì¡°íšŒ ë¡œê·¸)
    â”œâ”€â”€ sermon_id â†’ sermons
    â”œâ”€â”€ user_id
    â”œâ”€â”€ church_id
    â””â”€â”€ viewed_at
```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1ë‹¨ê³„: Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
```typescript
import { createClient } from '@supabase/supabase-js';

const supabase = createClient(
  'YOUR_SUPABASE_URL',
  'YOUR_SUPABASE_ANON_KEY'
);
```

### 2ë‹¨ê³„: ì„¤êµ ëª©ë¡ ì¡°íšŒ
```typescript
const { data: sermons } = await supabase
  .from('sermons')
  .select('*')
  .eq('is_active', true)
  .order('created_at', { ascending: false });
```

### 3ë‹¨ê³„: ìœ íŠœë¸Œ í”Œë ˆì´ì–´ í‘œì‹œ
```typescript
<WebView
  source={{
    uri: `https://www.youtube.com/embed/${sermon.youtube_video_id}`
  }}
  allowsFullscreenVideo
/>
```

## ğŸ“± í™”ë©´ êµ¬ì„± ì˜ˆì‹œ

### ë©”ì¸ í™”ë©´
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒŸ ì¶”ì²œ ì„¤êµ (ìºëŸ¬ì…€)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ì£¼ì¼] [ìˆ˜ìš”] [ê¸ˆìš”] [íŠ¹ë³„] â”‚ â† ì¹´í…Œê³ ë¦¬ íƒ­
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ì¸ë„¤â”‚ ì€í˜œì™€ ì§„ë¦¬...        â”‚
â”‚  â”‚ì¼ â”‚ ê¹€ì˜ì§„ ëª©ì‚¬           â”‚
â”‚  â””â”€â”€â”€â”€â”˜ ìš”í•œë³µìŒ 1:14-18     â”‚
â”‚         ì¡°íšŒìˆ˜ 1,234         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ì¸ë„¤â”‚ ì‹­ìê°€ì˜ ëŠ¥ë ¥...      â”‚
â”‚  â”‚ì¼ â”‚ ì´ì„±í˜¸ ëª©ì‚¬           â”‚
â”‚  â””â”€â”€â”€â”€â”˜ ê³ ì „ 1:18-25         â”‚
â”‚         ì¡°íšŒìˆ˜ 892           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ìƒì„¸ í™”ë©´
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              â”‚
â”‚    ìœ íŠœë¸Œ í”Œë ˆì´ì–´           â”‚
â”‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì€í˜œì™€ ì§„ë¦¬ê°€ ì¶©ë§Œí•˜ì‹  ì˜ˆìˆ˜   â”‚
â”‚ ê¹€ì˜ì§„ ëª©ì‚¬ | 2024.01.07     â”‚
â”‚ ğŸ“– ìš”í•œë³µìŒ 1:14-18          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ìš”í•œë³µìŒ 1ì¥ì„ í†µí•´...       â”‚
â”‚ (ì„¤êµ ì„¤ëª…)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ #ì€í˜œ #ì§„ë¦¬ #ìš”í•œë³µìŒ        â”‚
â”‚ ğŸ‘ ì¡°íšŒìˆ˜ 1,234              â”‚
â”‚ [ê³µìœ ] [ì¦ê²¨ì°¾ê¸°]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”¥ í•„ìˆ˜ êµ¬í˜„ ì‚¬í•­

### 1. ì¶”ì²œ ì„¤êµ í‘œì‹œ
```typescript
.eq('is_featured', true)
```

### 2. ì¹´í…Œê³ ë¦¬ í•„í„°ë§
```typescript
.eq('category_id', selectedCategoryId)
```

### 3. ì¡°íšŒìˆ˜ ê¸°ë¡
```typescript
await supabase
  .from('sermon_views')
  .insert({
    sermon_id: sermonId,
    user_id: userId,
  });
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **RLS ì •ì±…**: ì•±ì—ì„œëŠ” SELECTë§Œ ì‚¬ìš© (INSERT/UPDATE/DELETE ë¶ˆê°€)
2. **í™œì„±í™” í•„í„°**: í•­ìƒ `is_active = true` ì¡°ê±´ ì¶”ê°€
3. **ë°œí–‰ ì‹œê°„**: `published_at <= NOW()` ì¡°ê±´ìœ¼ë¡œ ì˜ˆì•½ ë°œí–‰ ì²˜ë¦¬
4. **ì¡°íšŒìˆ˜ ì¤‘ë³µ**: í•œ ì‚¬ìš©ìê°€ í•œ ì„¤êµë¥¼ ì—¬ëŸ¬ ë²ˆ ì‹œì²­í•´ë„ ì¡°íšŒìˆ˜ëŠ” í•œ ë²ˆë§Œ ì¦ê°€í•˜ë„ë¡ ì²˜ë¦¬ ê¶Œì¥

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

- **ìºì‹±**: 10ë¶„ ê°„ê²©ìœ¼ë¡œ ì„¤êµ ëª©ë¡ ìºì‹±
- **í˜ì´ì§€ë„¤ì´ì…˜**: 20ê°œì”© ë¡œë“œ
- **Lazy Loading**: ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì§€ì—° ë¡œë“œ
- **ê°€ìƒí™”**: FlatList ë˜ëŠ” VirtualizedList ì‚¬ìš©

## ğŸ’¬ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

**Q: ìœ íŠœë¸Œ API í‚¤ê°€ í•„ìš”í•œê°€ìš”?**
A: ì•„ë‹ˆìš”. ì¸ë„¤ì¼ê³¼ ì„ë² ë”©ì€ API í‚¤ ì—†ì´ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

**Q: ì˜¤í”„ë¼ì¸ì—ì„œë„ ì¬ìƒ ê°€ëŠ¥í•œê°€ìš”?**
A: ìœ íŠœë¸Œ ìŠ¤íŠ¸ë¦¬ë°ì´ë¯€ë¡œ ì˜¤í”„ë¼ì¸ ì¬ìƒì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.

**Q: ì¡°íšŒìˆ˜ëŠ” ì–´ë–»ê²Œ ì§‘ê³„ë˜ë‚˜ìš”?**
A: `sermon_views` í…Œì´ë¸”ì— INSERTí•˜ë©´ íŠ¸ë¦¬ê±°ê°€ ìë™ìœ¼ë¡œ `sermons.view_count`ë¥¼ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.

**Q: ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•˜ë ¤ë©´?**
A: `sermon_categories` í…Œì´ë¸”ì— ì§ì ‘ INSERTí•˜ê±°ë‚˜ ì‹œìŠ¤í…œ ê´€ë¦¬ìì—ê²Œ ìš”ì²­í•˜ì„¸ìš”.

## ğŸ› ï¸ ê°œë°œ ìˆœì„œ ì œì•ˆ

1. âœ… ì„¤êµ ëª©ë¡ í™”ë©´ êµ¬í˜„
2. âœ… ì¸ë„¤ì¼ ë° ê¸°ë³¸ ì •ë³´ í‘œì‹œ
3. âœ… ìƒì„¸ í™”ë©´ ë° ìœ íŠœë¸Œ í”Œë ˆì´ì–´
4. âœ… ì¡°íšŒìˆ˜ ê¸°ë¡ ê¸°ëŠ¥
5. âœ… ì¶”ì²œ ì„¤êµ ìºëŸ¬ì…€
6. âœ… ì¹´í…Œê³ ë¦¬ íƒ­ í•„í„°ë§
7. âœ… ê²€ìƒ‰ ê¸°ëŠ¥ (ì˜µì…˜)
8. âœ… ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥ (ì˜µì…˜)

## ğŸ“ ì§€ì›

- ğŸ“– **ìƒì„¸ ë¬¸ì„œ**: [sermons-api-guide.md](./sermons-api-guide.md)
- âš¡ **ë¹ ë¥¸ ì‹œì‘**: [sermons-quick-start.md](./sermons-quick-start.md)
- ğŸ’¬ **ë¬¸ì˜**: ë°±ì—”ë“œ ê°œë°œíŒ€

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2024-11-24
**ë²„ì „**: 1.0
